#map{
    width:100%;
    height:100vh;
    position:relative;
}

.leaflet-control-container .leaflet-top.leaflet-left{
    margin-top:78px;
    margin-left:320px;
}

.legend{
    position:absolute;
    bottom:24px;
    right:24px;
    background:rgba(255,255,255,0.94);
    border:1px solid var(--border);
    border-radius:12px;
    padding:14px 16px;
    box-shadow:var(--shadow);
    min-width:140px;
    font-size:13px;
    z-index:1300;
    pointer-events:none;
}
.legend-title{
    font-weight:700;
    margin-bottom:8px;
    color:var(--text);
}
.legend-item{
    display:flex;
    align-items:center;
    gap:8px;
    color:var(--muted);
    margin-bottom:6px;
}
.legend-item:last-child{margin-bottom:0;}
.dot{
    width:12px;
    height:12px;
    border-radius:50%;
    display:inline-block;
}
.dot-new{background:#2fa84f;}
.dot-bad{background:#d93f3f;}
.dot-missing{background:#3f7ed9;}

.estado-marker{filter:drop-shadow(0 8px 14px rgba(0,0,0,0.18));}
.marker-bubble{
    width:38px;
    height:38px;
    border-radius:50%;
    border:3px solid #2fa84f;
    background:#fff;
    display:grid;
    place-items:center;
}
.marker-img{
    width:26px;
    height:26px;
    background-size:contain;
    background-position:center;
    background-repeat:no-repeat;
}

.popup-crear{
    min-width:300px;
    font-size:13px;
    color:#1f2d3d;
    padding:0;
    background:transparent;
    border:none;
    border-radius:0;
    box-shadow:none;
}
.popup-tabs{
    display:flex;
    gap:6px;
    margin-bottom:8px;
}
.popup-tabs .tab-btn{
    flex:1;
    border:1px solid #e5e9f2;
    background:#f5f7fb;
    border-radius:8px;
    padding:6px;
    cursor:pointer;
    font-weight:600;
}
.popup-tabs .tab-btn.active{
    background:#1d70b8;
    border-color:#1d70b8;
    color:#fff;
}
.popup-tabs .tab-btn.disabled{
    opacity:0.5;
    pointer-events:none;
}
.tab-panel{display:none;}
.tab-panel.active{display:block;}
.estado-grid,.icon-grid{
    display:grid;
    gap:8px;
}
.estado-grid{
    grid-template-columns:repeat(3,1fr);
}
.estado-option{
    border:1px solid #e5e9f2;
    border-radius:8px;
    padding:8px 6px;
    background:#fff;
    cursor:pointer;
    font-weight:600;
}
.estado-option.active{
    border-color:#1d70b8;
    color:#1d70b8;
    background:rgba(29,112,184,0.08);
}
.step{
    margin-bottom:10px;
    border:none;
    border-radius:12px;
    padding:8px 0 0 0;
    background:transparent;
    box-shadow:none;
}
.step.collapsed{
    opacity:0.8;
    transform:scale(0.99);
    transition:transform 120ms ease, opacity 120ms ease;
}
.step-title{
    font-weight:700;
    margin-bottom:6px;
    color:var(--text);
}
.fecha-row{
    margin-top:10px;
    font-size:12px;
    color:var(--muted);
    display:flex;
    flex-direction:column;
    gap:4px;
}
.fecha-row input{
    padding:8px 10px;
    border-radius:8px;
    border:1px solid var(--border);
}
.icon-grid{
    grid-template-columns:repeat(2,1fr);
    gap:10px;
}
.icon-option{
    border:1px solid #e5e9f2;
    border-radius:12px;
    padding:10px;
    background:#fff;
    cursor:pointer;
    display:grid;
    justify-items:center;
    gap:6px;
    transition:transform 120ms ease, box-shadow 120ms ease, border-color 120ms ease;
}
.icon-option.active{
    border-color:#1d70b8;
    box-shadow:0 8px 18px rgba(29,112,184,0.18);
    transform:translateY(-1px);
}
.icon-thumb{
    width:48px;
    height:48px;
    background-size:contain;
    background-position:center;
    background-repeat:no-repeat;
    border-radius:10px;
    background-color:#f5f7fb;
    border:1px solid #e5e9f2;
}
.btn-crear{
    width:100%;
    margin-top:12px;
    padding:12px 14px;
    border:none;
    border-radius:12px;
    background:linear-gradient(135deg,#1d70b8,#155488);
    color:#fff;
    font-weight:700;
    cursor:pointer;
    box-shadow:0 10px 22px rgba(29,112,184,0.18);
    transition:transform 120ms ease, box-shadow 120ms ease, opacity 120ms ease;
}
.btn-crear:disabled{
    opacity:0.6;
    box-shadow:none;
    cursor:not-allowed;
}

#reportes{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
    gap:14px;
    padding:14px 20px 24px;
    background:#f7f8fb;
}
.reporte-card{
    background:#fff;
    border:1px solid var(--border);
    border-radius:12px;
    box-shadow:var(--shadow);
    padding:14px;
}
.reporte-card h3{
    margin:0 0 10px;
    font-size:16px;
    color:var(--text);
}
.reporte-card table{
    width:100%;
    border-collapse:collapse;
    font-size:13px;
}
.reporte-card th,
.reporte-card td{
    border-bottom:1px solid #e5e9f2;
    padding:8px;
    text-align:left;
}
.reporte-card th{
    background:#f5f7fb;
    color:var(--muted);
    font-weight:700;
}
.reporte-card tbody tr:last-child td{
    border-bottom:none;
}
.reporte-card td.empty{
    text-align:center;
    color:var(--muted);
}

.hidden{
    display:none!important;
}

.mobile-banner{
    position:fixed;
    top:80px;
    right:12px;
    background:rgba(255,255,255,0.92);
    backdrop-filter:blur(6px);
    padding:6px 10px;
    border-radius:12px;
    font-weight:700;
    color:var(--primary);
    box-shadow:0 6px 16px rgba(0,0,0,0.1);
    z-index:1500;
    display:none;
}

.aviso-thumb{
    margin-top:8px;
}
.aviso-thumb img{
    max-width:120px;
    max-height:80px;
    border-radius:8px;
    display:block;
    transition:transform 200ms ease;
}
.btnVerFoto{
    margin-top:6px;
    width:auto;
    background:#1d70b8;
    color:#fff;
    border:none;
    border-radius:8px;
    padding:6px 10px;
    cursor:pointer;
}
.btnVerFoto:hover{
    background:#155488;
}
.foto-fullscreen{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.7);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:4000;
    opacity:0;
    pointer-events:none;
    transition:opacity 200ms ease;
}
.foto-fullscreen.active{
    opacity:1;
    pointer-events:auto;
}
.foto-fullscreen img{
    max-width:80%;
    max-height:80%;
    border-radius:12px;
    box-shadow:0 20px 60px rgba(0,0,0,0.35);
}

.modal{
    position:fixed;
    inset:0;
    background:rgba(15,23,42,0.45);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:2000;
}
.modal-content{
    background:#fff;
    border-radius:12px;
    padding:18px;
    width:340px;
    box-shadow:0 20px 50px rgba(0,0,0,0.25);
}
.modal-content h3{
    margin:0 0 12px;
}
.modal-content label{
    display:block;
    font-size:13px;
    color:var(--muted);
    margin:10px 0 4px;
}
.modal-content select,
.modal-content textarea,
.modal-content input[type="file"]{
    width:100%;
    border:1px solid var(--border);
    border-radius:10px;
    padding:8px 10px;
    font-family:inherit;
}
.modal-content textarea{resize:vertical;}
.modal-actions{
    display:flex;
    justify-content:flex-end;
    gap:10px;
    margin-top:12px;
}
.modal-actions button{
    width:auto;
    margin-top:0;
}
.ubica{
    margin-top:8px;
    font-size:12px;
    color:var(--muted);
}

#btnReportar{
    margin-top:8px;
}

#loginOverlay{
    position:fixed;
    inset:0;
    background:#f5f7fb;
    display:flex;
    z-index:3000;
}
.login-layout{
    display:grid;
    grid-template-columns:1.4fr 1fr;
    width:100%;
    height:100%;
}
.login-hero{
    background:url(" ../src/assets/login-bg.png") center/cover no-repeat;
}
.login-card{
    background:#fff;
    padding:48px;
    display:flex;
    flex-direction:column;
    justify-content:center;
    gap:16px;
    box-shadow:0 20px 60px rgba(0,0,0,0.18);
}
.login-logo{
    max-width:180px;
}
.login-card h2{
    margin:0;
}
.login-card p{
    margin:0;
    color:var(--muted);
}
.login-card form{
    display:grid;
    gap:12px;
}
.login-card label{
    font-size:13px;
    color:var(--muted);
}
.login-card input{
    width:100%;
    height:44px;
    padding:10px 12px;
    border-radius:10px;
    border:1px solid var(--border);
}
.login-card button{
    width:auto;
    margin-top:0;
}
.login-actions{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:10px;
}
.login-link{
    color:var(--primary);
    font-weight:600;
}
.login-hint{
    display:block;
    margin-top:4px;
    color:var(--muted);
    font-size:12px;
}

@media (max-width: 900px){
    .leaflet-control-container .leaflet-top.leaflet-left{
        margin-left:12px;
    }
    .legend{
        right:10px;
        bottom:14px;
    }
    #reportes{
        padding:10px 12px 16px;
        grid-template-columns:1fr;
    }
    #loginOverlay .login-layout{
        grid-template-columns:1fr;
    }
    .login-hero{display:none;}
    .mobile-banner{display:block;}
}

@media (max-width: 600px){
    #reportes{
        display:none;
    }
    #map{
        position:fixed;
        top:70px;
        left:0;
        right:0;
        bottom:0;
        height:auto;
        margin-top:0;
    }
    .popup-crear{
        min-width:260px;
        padding:8px;
    }
    .legend{
        font-size:12px;
    }
}
